Search.setIndex({"docnames": ["0.intro", "1.reg-problem", "2.mapping-coords", "3.rigid-body", "4.transforming-images", "5.interpolation", "6.filtering", "7.summary", "README"], "filenames": ["0.intro.ipynb", "1.reg-problem.ipynb", "2.mapping-coords.ipynb", "3.rigid-body.ipynb", "4.transforming-images.ipynb", "5.interpolation.ipynb", "6.filtering.ipynb", "7.summary.md", "README.md"], "titles": ["Introduction", "The Image Registration Problem", "Mapping Coordinates", "Rigid-body Transformations", "Transforming Images", "Interpolation", "Image Filtering", "Summary", "NCCN-FN-ImageRegistration"], "terms": {"registr": [0, 2, 4], "i": [0, 1, 2, 3, 4], "fundament": 0, "imag": [0, 2, 3], "process": [0, 3, 4], "step": 0, "when": [0, 1, 2, 3, 4], "run": [0, 3], "neuroimag": 0, "experi": 0, "research": [0, 1], "often": [0, 1, 3, 4], "collect": [0, 2], "differ": [0, 1, 2, 3, 4], "scan": [0, 1], "from": [0, 1, 2, 3, 4], "same": [0, 1, 2, 3, 4], "subject": 0, "These": [0, 3, 4], "mai": [0, 1, 2], "includ": [0, 2, 3], "anatom": [0, 1, 2], "mr": [0, 3], "bold": 0, "dure": 0, "cognit": 0, "task": [0, 2], "asl": 0, "quantifi": 0, "blood": 0, "flow": 0, "dti": 0, "white": 0, "matter": 0, "tractographi": 0, "each": [0, 1, 2, 3, 4], "term": [0, 2, 3], "its": [0, 3], "dimens": [0, 1, 2, 4], "resolut": [0, 2], "contrast": 0, "orient": [0, 2, 3], "anatomi": [0, 1], "In": [0, 1, 2, 3, 4, 7], "order": [0, 1, 3, 4], "us": [0, 1, 3, 4], "locat": [0, 1, 2, 4], "must": [0, 1], "identifi": [0, 1], "As": [0, 1, 2, 3, 4], "method": [0, 2], "ar": [0, 1, 2, 3, 4], "requir": [0, 1], "allow": [0, 3], "comput": [0, 2], "know": [0, 2, 4], "which": [0, 1, 2, 3], "part": [0, 1, 2, 3], "correspond": [0, 1, 2, 3, 4], "thi": [0, 1, 2, 3, 4, 7], "known": [0, 1, 2, 3], "lesson": [0, 1, 2, 7], "we": [0, 1, 2, 3, 4, 7], "formalis": 0, "notion": 0, "align": [0, 1, 2, 3, 4], "across": [0, 1, 2], "discuss": [0, 2, 4], "autom": 0, "well": [0, 1, 2, 3], "limit": 0, "issu": [0, 1], "approach": [0, 2], "solv": [0, 1], "problem": 0, "also": [0, 2, 3, 4], "see": [0, 1, 2, 3, 4], "how": [0, 1, 2, 3, 4], "implement": 0, "wai": [0, 1, 2], "within": [0, 1, 3, 4], "spm": [0, 3], "The": [0, 2, 4], "map": [0, 1, 3, 4], "coordin": [0, 1, 3, 4], "dr": 0, "martyn": 0, "mcfarquhar": 0, "phd": 0, "fhea": 0, "lectur": 0, "4": [0, 2, 3], "31": [0, 3], "booth": 0, "street": 0, "east": 0, "build": [0, 3], "divis": 0, "psychologi": 0, "commun": 0, "human": 0, "neurosci": 0, "school": 0, "health": 0, "scienc": 0, "univers": 0, "manchest": 0, "m13": 0, "9pl": 0, "t": [0, 2, 3, 4], "44": 0, "0": [0, 1, 3, 4], "161": 0, "275": 0, "2688": 0, "e": 0, "ac": 0, "uk": 0, "core": 1, "applic": 1, "wide": 1, "rang": 1, "context": [1, 4], "For": [1, 2, 3, 4], "necessari": [1, 2, 3], "fmri": 1, "volum": 1, "correct": [1, 2, 3], "motion": [1, 2], "longitudin": 1, "dataset": 1, "togeth": 1, "assess": 1, "chang": [1, 2, 3, 4], "over": 1, "time": [1, 3], "data": [1, 3, 4], "scanner": [1, 3], "site": 1, "multi": 1, "centr": 1, "templat": 1, "atla": 1, "localis": 1, "result": [1, 3, 4], "make": [1, 2, 3, 4], "comparison": [1, 4], "studi": 1, "all": [1, 3, 4], "case": [1, 3], "can": [1, 2, 3, 4], "break": 1, "down": 1, "regist": 1, "two": [1, 2, 3, 4], "our": [1, 2, 3, 4], "gener": [1, 3, 4], "framework": [1, 4], "where": [1, 2, 3, 4], "goal": 1, "move": [1, 3, 4], "one": [1, 2, 3], "other": [1, 2], "sourc": [1, 2], "keep": [1, 4], "stationari": 1, "target": [1, 2], "refer": [1, 3, 4], "To": [1, 2, 3, 4], "need": [1, 2, 3, 4], "consid": [1, 2, 3], "shown": [1, 3], "below": [1, 2, 3, 4], "clearli": 1, "becaus": [1, 2, 3, 4], "brain": [1, 2, 3, 4], "doe": [1, 2], "overlap": 1, "broad": 1, "aim": [1, 2], "would": [1, 3, 4], "until": 1, "point": [1, 2, 3, 4], "sai": 1, "understand": [1, 3], "why": [1, 2], "collat": 1, "meaning": 1, "inform": [1, 3], "multipl": [1, 3, 4], "do": [1, 2, 3, 4], "some": [1, 2, 3, 4], "sort": 1, "between": [1, 2, 4], "If": [1, 2, 3, 4], "ident": [1, 2], "size": [1, 3], "simpli": [1, 3], "an": [1, 2], "sequenc": 1, "ha": [1, 3, 4], "been": [1, 3, 4], "interpol": 1, "altern": [1, 2, 3], "world": [1, 2], "space": [1, 2], "matrix": [1, 4], "mathbf": [1, 3, 4], "q": [1, 3, 4], "explor": [1, 3, 4, 7], "last": [1, 2], "week": [1, 2, 4], "either": [1, 3], "take": [1, 2, 3, 4], "transform": [1, 2], "them": [1, 2, 3, 4], "extract": [1, 3], "match": [1, 2], "voxel": [1, 2], "valu": [1, 3, 4], "most": [1, 3], "import": [1, 2, 4], "realis": 1, "just": [1, 2, 3, 4], "exist": 1, "mean": [1, 2, 3], "instanc": [1, 2, 3, 4], "larg": 1, "useless": 1, "posit": [1, 4], "associ": [1, 4], "inde": 1, "insid": 1, "outsid": 1, "addit": [1, 2, 3], "beyond": 1, "read": [1, 3], "follow": [1, 2, 4], "anat": 1, "spm_data_read": 1, "sub": [1, 2], "01_t1w": [1, 2], "nii": [1, 2, 3], "func": 1, "01_task": [1, 2], "flanker_run": [1, 2], "1_bold": [1, 2], "1": [1, 2, 3, 4], "you": [1, 2, 3, 4], "download": 1, "function": [1, 2, 3], "yourself": 1, "want": [1, 2, 3, 4], "along": [1, 3, 4], "now": [1, 2, 3, 4], "situat": 1, "interest": [1, 3], "87": [1, 2], "182": [1, 2], "127": [1, 2], "have": [1, 2, 3, 4, 7], "alreadi": 1, "anterior": 1, "cingul": 1, "measur": 1, "easili": 1, "210": 1, "howev": [1, 2, 3, 4], "file": [1, 3], "hit": 1, "index": [1, 4], "exce": 1, "arrai": 1, "bound": [1, 4], "64": [1, 4], "much": [1, 4], "smaller": 1, "than": 1, "queri": 1, "1x3": 1, "doubl": [1, 2, 3], "176": 1, "256": 1, "40": 1, "scale": [1, 2, 3], "form": [1, 2, 3, 4], "achiev": [1, 2, 3, 4], "spm_reslic": 1, "call": [1, 3], "code": [1, 2, 3], "usual": [1, 4], "flag": 1, "spm_get_default": 1, "realign": 1, "write": 1, "resampl": 1, "interp": 1, "nearest": 1, "neighbour": 1, "default": [1, 2], "set": [1, 2], "modifi": 1, "": [1, 2, 3], "c": 1, "user": 1, "marti": 1, "document": 1, "spm_my_default": 1, "m": [1, 2, 4], "field": 1, "ui": 1, "stat": 1, "spm12": 1, "v7141": 1, "14": [1, 3], "34": [1, 3], "57": 1, "17": 1, "10": 1, "2024": 1, "complet": 1, "59": 1, "A": 1, "new": [1, 2, 3, 4], "rsub": 1, "save": [1, 3], "contain": [1, 3], "both": [1, 2, 3], "ifunc": 1, "6": 1, "seem": 1, "job": 1, "done": [1, 4], "manag": 1, "creat": [1, 3, 4], "immedi": 1, "overlai": 1, "figur": 1, "imagesc": 1, "hold": 1, "alphadata": 1, "draw": 1, "transpar": 1, "gca": 1, "ydir": 1, "normal": 1, "colormap": 1, "jet": 1, "drawcrosshair": 1, "color": 1, "r": [1, 3], "so": [1, 2, 3, 4], "even": [1, 3], "though": 1, "initi": 1, "automat": 1, "caus": 1, "actual": [1, 4], "repres": [1, 2, 3], "structur": 1, "line": [1, 2, 3], "up": [1, 2, 3, 4], "after": [1, 3], "fix": 1, "focu": [1, 2], "rest": 1, "mention": 2, "previou": [2, 3, 4], "section": [2, 3, 4], "find": 2, "given": [2, 3, 4], "about": [2, 3, 4], "affin": [2, 4], "matric": [2, 3], "covert": [2, 3], "obviou": 2, "place": 2, "start": 2, "expand": [2, 3], "content": 2, "header": [2, 3, 4], "anoth": [2, 3, 4], "note": [2, 3], "linear": [2, 3], "free": 2, "reign": 2, "like": [2, 3, 4], "cannot": 2, "bend": [2, 3], "ani": [2, 3, 4], "element": [2, 3], "instead": [2, 3, 4], "restrict": 2, "onli": [2, 3, 4], "being": 2, "abl": [2, 3], "translat": [2, 3], "rotat": [2, 3, 4], "shear": [2, 3], "get": [2, 3, 4], "sens": [2, 4], "wherea": 2, "someth": 2, "more": [2, 4], "flexibl": 2, "At": 2, "end": [2, 3, 4], "non": 2, "offer": 2, "greater": 2, "cost": 2, "complex": 2, "saw": [2, 4], "defin": [2, 4], "version": [2, 4], "those": 2, "tm": [2, 4], "work": [2, 3, 4], "turn": [2, 4], "millimetr": [2, 3, 4], "appli": [2, 4], "convert": [2, 4], "back": [2, 3, 4], "intuit": [2, 4], "real": [2, 4], "unit": [2, 3, 4], "degre": 2, "similarli": [2, 3], "yet": 2, "still": 2, "thank": 2, "therefor": [2, 3, 4], "common": 2, "system": [2, 3], "irrespect": 2, "question": 2, "adapt": 2, "definit": 2, "_": [2, 3], "what": [2, 3], "assum": [2, 3], "x": [2, 3], "oper": [2, 3, 4], "qx": 2, "first": [2, 3, 4], "invers": [2, 3], "here": [2, 3], "abov": [2, 4], "adjust": 2, "misalign": 2, "equival": 2, "drop": [2, 3], "out": [2, 4], "equat": [2, 3], "give": [2, 3, 4], "u": [2, 3, 4], "exampl": [2, 3, 4], "matlab": [2, 3], "load": 2, "hdr_anat": 2, "spm_data_hdr_read": [2, 3], "hdr_func": 2, "mt": [2, 3], "mat": [2, 3], "inv": [2, 3], "accord": 2, "calcul": [2, 3], "7972": 2, "48": 2, "4056": 2, "20": [2, 3, 4], "1250": 2, "125": 2, "83": 2, "8313": 2, "52": 2, "0542": 2, "5000": 2, "0000": [2, 3], "0541": 2, "reason": 2, "thei": [2, 3], "share": 2, "good": 2, "idea": [2, 3, 4], "region": 2, "origin": [2, 3, 4], "anywher": 2, "rule": [2, 4], "involv": 2, "necessarili": 2, "tell": [2, 4], "visualis": 2, "gif": 2, "view": 2, "window": 2, "click": 2, "softwar": 2, "closest": 2, "veri": [2, 3], "poor": 2, "hopefulli": 2, "should": [2, 4], "come": 2, "shift": [2, 4], "better": [2, 3], "next": [2, 4], "introduc": 3, "abil": 3, "express": 3, "begin": [3, 4], "b_x": 3, "m_": 3, "11": 3, "a_x": 3, "12": 3, "a_i": 3, "13": [3, 4], "a_z": 3, "b_y": 3, "21": [3, 4], "22": 3, "23": [3, 4], "24": 3, "b_z": 3, "32": 3, "33": 3, "might": 3, "recognis": 3, "combin": [3, 4], "old": [3, 4], "three": 3, "compactli": 3, "b": 3, "ma": [3, 4], "bmatrix": [3, 4], "paramet": 3, "notic": [3, 4], "add": 3, "extra": 3, "row": 3, "multipli": [3, 4], "vector": 3, "encod": [3, 4], "word": 3, "parallel": 3, "remain": 3, "construct": 3, "zoom": 3, "fig": 3, "illustr": [3, 4], "feel": 3, "plai": 3, "around": 3, "slider": 3, "everi": 3, "pixel": 3, "separ": 3, "final": 3, "z": 3, "individu": 3, "specif": 3, "q_": 3, "axi": [3, 4], "y": [3, 4], "radian": 3, "pitch": 3, "roll": 3, "yaw": 3, "r_": 3, "co": 3, "sin": 3, "quad": 3, "worri": 3, "trigonometri": 3, "main": [3, 4], "diagon": 3, "off": 3, "ax": 3, "factor": [3, 4], "q_y": 3, "q_z": 3, "neg": [3, 4], "flip": 3, "top": 3, "2": 3, "3": [3, 4], "without": [3, 4], "shape": 3, "subset": 3, "furthermor": 3, "stretch": 3, "squash": 3, "seen": 3, "kei": 3, "thing": 3, "convers": 3, "consist": 3, "v2w": 3, "suitabl": 3, "answer": 3, "medic": 3, "format": 3, "store": 3, "metadata": 3, "carri": 3, "On": 3, "cours": 3, "mostli": 3, "nifti": 3, "practic": 3, "rememb": 3, "depend": 3, "upon": 3, "simplic": 3, "correctli": 3, "swap": 3, "110": 3, "190": 3, "rearrang": 3, "alwai": 3, "hdr": 3, "example_imag": 3, "4x4": 3, "0122": 3, "0027": 3, "1999": 3, "107": 3, "6227": 3, "7913": 3, "6113": 3, "0096": 3, "18": 3, "4938": 3, "7914": 3, "0116": 3, "191": 3, "0988": 3, "Then": 3, "25": 3, "30": 3, "coord": 3, "mm": 3, "4x1": 3, "71": 3, "3129": 3, "2397": 3, "159": 3, "4359": 3, "vox": 3, "spm_imatrix": 3, "input": 3, "return": 3, "try": [3, 4], "p": 3, "earlier": [3, 4], "mrx": 3, "continu": 3, "mry": 3, "mrz": 3, "mz": 3, "principl": 4, "rigid": 4, "bodi": 4, "conceptualis": 4, "util": 4, "provid": 4, "speak": 4, "choic": 4, "perform": 4, "alter": 4, "directli": 4, "type": 4, "One": 4, "motiv": 4, "behind": 4, "represent": 4, "3mm": 4, "5mm": 4, "81": 4, "115": 4, "73": 4, "55": 4, "focus": 4, "55mm": 4, "9mm": 4, "backward": 4, "could": 4, "9": 4, "pre": 4, "left": 4, "right": 4, "64mm": 4, "further": 4, "perman": 4, "ast": 4, "replac": 4, "forev": 4, "did": 4, "effect": 4, "anyth": 4, "look": 4, "somewhat": 4, "invis": 4, "displai": 4, "had": 4, "compar": 4, "typic": 4, "bring": 4, "grasp": 4, "contextualis": 4, "later": 4, "highlight": 4, "becom": 4, "clearer": 4, "short": 4, "onc": 4, "anymor": 4, "exclus": 4, "computation": 4, "effici": 4, "think": 4, "qa": 4, "blank": 4, "through": 4, "copi": 4, "pull": 4, "video": 4, "insert": 4}, "objects": {}, "objtypes": {}, "objnames": {}, "titleterms": {"introduct": 0, "content": 0, "about": 0, "author": 0, "The": [1, 3], "imag": [1, 4, 6], "registr": 1, "problem": 1, "motiv": 1, "matlab": 1, "exampl": 1, "map": 2, "coordin": 2, "us": 2, "mathbf": 2, "q": 2, "matrix": [2, 3], "evalu": 2, "rigid": 3, "bodi": 3, "transform": [3, 4], "affin": 3, "advanc": 3, "structur": 3, "m": 3, "convert": 3, "between": 3, "voxel": [3, 4], "space": [3, 4], "world": [3, 4], "break": 3, "down": 3, "an": [3, 4], "spm": 4, "interpol": 5, "filter": 6, "summari": 7, "nccn": 8, "fn": 8, "imageregistr": 8}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 8, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx.ext.intersphinx": 1, "sphinxcontrib.bibtex": 9, "sphinx": 57}, "alltitles": {"Introduction": [[0, "introduction"]], "Contents": [[0, "contents"]], "About the Author": [[0, "about-the-author"]], "The Image Registration Problem": [[1, "the-image-registration-problem"]], "Motivation for Registration": [[1, "motivation-for-registration"]], "MATLAB Example": [[1, "matlab-example"]], "Mapping Coordinates": [[2, "mapping-coordinates"]], "Using the \\mathbf{Q} Matrix for Mapping": [[2, "using-the-mathbf-q-matrix-for-mapping"]], "Evaluating the Q matrix": [[2, "evaluating-the-q-matrix"]], "Rigid-body Transformations": [[3, "rigid-body-transformations"]], "Affine Transformations": [[3, "affine-transformations"]], "Advanced: The Structure of the M Matrix": [[3, null]], "Converting Between Voxel-space and World-space": [[3, "converting-between-voxel-space-and-world-space"]], "Advanced: Breaking Down an M Matrix": [[3, null]], "Transforming Images": [[4, "transforming-images"]], "Transforming an Image in World-space": [[4, "transforming-an-image-in-world-space"]], "Transforming an Image in Voxel-space": [[4, "transforming-an-image-in-voxel-space"]], "Transforming Images in SPM": [[4, "transforming-images-in-spm"]], "Interpolation": [[5, "interpolation"]], "Image Filtering": [[6, "image-filtering"]], "Summary": [[7, "summary"]], "NCCN-FN-ImageRegistration": [[8, "nccn-fn-imageregistration"]]}, "indexentries": {}})